(this.webpackJsonpclase4=this.webpackJsonpclase4||[]).push([[0],{98:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(25),c=n.n(a),o=n(21),s=n(9),i=n(2),u=function(e){var t=e.notes,n=Object(s.h)().id,r=t.find((function(e){return e.id===n}));return r?(console.log(r),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:r.content}),Object(i.jsx)("div",{children:r.user.name}),Object(i.jsx)("div",{children:Object(i.jsx)("strong",{children:r.important?"important":""})})]})):null},l=n(16),j=n.n(l),d=n(22),b=n(10),O=n(28),h=n.n(O),p="/api/notes",f=null,g=function(e){f="Bearer ".concat(e)},x=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/login/",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=n(23),m=n(29),w=n(117),y=function(e){var t=e.type,n=Object(r.useState)(""),a=Object(b.a)(n,2),c=a[0],o=a[1];return{type:t,value:c,onChange:function(e){o(e.target.value)}}};function N(e){var t=y({type:"text"}),n=y({type:"password"});return Object(i.jsxs)(m.a,{onSubmit:e.handleLogin,children:[Object(i.jsx)(m.a.Group,{id:"username",children:Object(i.jsx)(m.a.Control,Object(v.a)(Object(v.a)({},t),{},{name:"Username",placeholder:"Username"}))}),Object(i.jsx)(m.a.Group,{id:"password",children:Object(i.jsx)(m.a.Control,Object(v.a)(Object(v.a)({},n),{},{name:"Password",placeholder:"Password"}))}),Object(i.jsx)(w.a,{color:"primary",variant:"outlined",id:"form-login-button",children:"Login"})]})}function S(){var e=Object(s.g)(),t=Object(r.useState)(null),n=Object(b.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(""),u=Object(b.a)(o,2),l=u[0],O=u[1],h=Object(r.useState)(""),p=Object(b.a)(h,2),f=p[0],v=p[1],m=Object(r.useState)(null),w=Object(b.a)(m,2),y=w[0],S=w[1],k=function(){var t=Object(d.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,x({username:l,password:f});case 4:r=t.sent,window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(r)),g(r.token),S(r),O(""),v(""),e.push("/notes"),t.next=19;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0.name),console.log(t.t0.message),c("Wrong credentials"),setTimeout((function(){c(null)}),5e3);case 19:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}();return a?Object(i.jsx)("p",{children:a}):y?Object(i.jsx)("p",{children:"User is logged"}):Object(i.jsx)(N,{username:l,password:f,handleLogin:k,handleUsernameChange:function(e){var t=e.target;return O(t.value)},handlePasswordChange:function(e){var t=e.target;return v(t.value)}})}var k,C=function(e){var t=e.message;return null===t?null:Object(i.jsx)("div",{className:"error",children:t})},L=n(38),U=n(39),I=U.a.button(k||(k=Object(L.a)(["\n    background: white;\n    cursor: pointer;\n    font-size: 1 em;\n    margin: 1 em;\n    padding: 4px 12px;\n    border: 1px solid #09f;\n    border-radius: 5px;\n    transition: all .3s ease; \n\n    &:hover {\n        background: #09f;\n    }\n"]))),A=n(112),T=function(e){var t=e.note,n=e.toggleImportance,r=t.important?"make not important":"make important";return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(A.a,{className:"note",children:Object(i.jsx)(o.b,{to:"/notes/".concat(t.id),children:t.content})}),Object(i.jsx)(A.a,{children:Object(i.jsx)(I,{onClick:n,children:r})})]})},E={CANCEL_BUTTON:"Cancel"},J=n(64),P=Object(r.forwardRef)((function(e,t){var n=e.children,a=e.buttonLabel,c=void 0===a?"show":a,o=Object(r.useState)(!1),s=Object(b.a)(o,2),u=s[0],l=s[1],j={display:u?"none":""},d={display:u?"":"none"},O=function(){return l(!u)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:O}})),Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{style:j,children:Object(i.jsx)("button",{onClick:O,children:c})}),Object(i.jsxs)("div",{style:d,children:[n,Object(i.jsx)(J.a,{onClick:O,children:E.CANCEL_BUTTON})]})]})}));P.displayName="Toggable";var B=P;function z(e){var t=e.addNote,n=e.handleLogout,a=Object(r.useState)(""),c=Object(b.a)(a,2),o=c[0],s=c[1],u=Object(r.useRef)();return Object(i.jsxs)(B,{buttonLabel:"New Note",ref:u,children:[Object(i.jsx)("h3",{children:"Create a new note"}),Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({content:o,important:!1}),s(""),u.current.toggleVisibility()},children:[Object(i.jsx)("input",{type:"text",placeholder:"Write your note content",onChange:function(e){s(e.target.value)},value:o}),Object(i.jsx)("button",{type:"submit",children:"Save"})]}),Object(i.jsx)("button",{onClick:n,children:"Logout"})]})}var D=n(63);function H(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){h.a.get(p).then((function(e){return e.data})).then((function(e){a(e)}))}),[]);return{addNote:function(e){(function(e){var t={headers:{Authorization:f}};return h.a.post(p,e,t).then((function(e){return e.data}))})(e).then((function(e){return a((function(t){return[].concat(Object(D.a)(t),[e])}))})).catch((function(e){console.error(e)}))},toggleImportanceOf:function(e){var t=n.find((function(t){return t.id===e})),r=Object(v.a)(Object(v.a)({},t),{},{important:!t.important});return function(e,t){var n={headers:{Authorization:f}};return h.a.put("".concat(p,"/").concat(e),t,n).then((function(e){return e.data}))}(e,r).then((function(t){a(n.map((function(n){return n.id!==e?n:t})))}))},notes:n}}var W=function(){var e=Object(r.useState)(null),t=Object(b.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteAppUser");if(e){var t=JSON.parse(e);a(t),g(t.token)}}),[]);var c=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,e.next=3,x({username:n,password:r});case 3:c=e.sent,window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(c)),g(c.token),a(c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{user:n,userLogout:function(){a(null),g(n.token),window.localStorage.removeItem("loggedNoteAppUser")},userLogin:c}},G=n(113),R=n(114),V=n(115),_=n(116);var F,q=function(){var e=H(),t=e.notes,n=e.addNote,a=e.toggleImportanceOf,c=W(),o=c.user,s=c.userLogin,u=c.userLogout,l=Object(r.useState)(!0),O=Object(b.a)(l,2),h=O[0],p=O[1],f=Object(r.useState)(null),g=Object(b.a)(f,2),x=g[0],v=g[1],m=Object(r.useState)(""),y=Object(b.a)(m,2),S=y[0],k=y[1],L=Object(r.useState)(""),U=Object(b.a)(L,2),I=U[0],A=U[1],E=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{s({username:S,password:I}),k(""),A("")}catch(n){console.log(n.name),console.log(n.message),v("Wrong credentials"),setTimeout((function(){v(null)}),5e3)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=h?t:t.filter((function(e){return e.important}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Notes"}),Object(i.jsx)(C,{message:x}),o?Object(i.jsx)(z,{addNote:n,handleLogout:u}):Object(i.jsx)(N,{username:S,password:I,handleLogin:E,handleUsernameChange:function(e){var t=e.target;return k(t.value)},handlePasswordChange:function(e){var t=e.target;return A(t.value)}}),Object(i.jsx)("div",{children:Object(i.jsxs)(w.a,{color:"primary",variant:"outlined",onClick:function(){return p(!h)},children:["show ",h?"important":"all"]})}),Object(i.jsx)(G.a,{children:Object(i.jsx)(R.a,{children:Object(i.jsx)(V.a,{children:J.map((function(e,t){return Object(i.jsx)(_.a,{children:Object(i.jsx)(T,{note:e,toggleImportance:function(){return t=e.id,void a(t).catch((function(e){v("Note was already removed from server"),console.error(e),setTimeout((function(){v()}),5e3)}));var t}},t)},e.id)}))})})})]})},K="#09f",M=Object(U.a)(o.b)(F||(F=Object(L.a)(["\n    color: ",";\n    text-decoration: none;\n    padding: 5px;\n    font-weight: ",";\n\n    &:hover {\n        border-bottom: 2px solid ",";\n    }\n"])),K,(function(e){return"bold"===e.variant?"bold":"regular"}),K),Q=function(){return Object(i.jsx)("h1",{children:"Home Page"})},X=function(){return Object(i.jsx)("h1",{children:"Users"})},Y=function(){var e=W().user,t=H().notes;return Object(i.jsxs)(o.a,{children:[Object(i.jsxs)("header",{children:[Object(i.jsx)(M,{to:"/",children:"Home"}),Object(i.jsx)(M,{to:"/notes",children:"Notes"}),Object(i.jsx)(M,{to:"/users",children:"Users"}),e?Object(i.jsxs)("em",{children:["Logged as ",e.name]}):Object(i.jsx)(M,{variant:"bold",to:"/login",children:"Login"})]}),Object(i.jsxs)(s.d,{children:[Object(i.jsx)(s.b,{path:"/notes/:id",children:Object(i.jsx)(u,{notes:t})}),Object(i.jsx)(s.b,{path:"/users",children:Object(i.jsx)(X,{})}),Object(i.jsx)(s.b,{path:"/notes",children:Object(i.jsx)(q,{})}),Object(i.jsx)(s.b,{path:"/login",render:function(){return e?Object(i.jsx)(s.a,{to:"/"}):Object(i.jsx)(S,{})}}),Object(i.jsx)(s.b,{path:"/",children:Object(i.jsx)(Q,{})})]})]})};n(97);c.a.render(Object(i.jsx)(Y,{}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.aa5ea7d6.chunk.js.map