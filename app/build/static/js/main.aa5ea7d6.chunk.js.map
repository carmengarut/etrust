{"version":3,"sources":["components/NoteDetail.js","services/notes.js","services/login.js","components/LoginForm.js","Login.js","components/Notification.js","components/Button.js","components/Note.js","i18n/index.js","components/Toggable.js","components/NoteForm.js","hooks/useNotes.js","hooks/useUser.js","Notes.js","themes.js","components/StyledLink.js","App.js","index.js"],"names":["NoteDetail","notes","id","useParams","note","find","console","log","content","user","name","important","baseUrl","token","setToken","newToken","login","credentials","a","axios","post","data","useField","type","useState","value","setValue","onChange","event","target","LoginForm","props","username","password","Form","onSubmit","handleLogin","Group","Control","placeholder","Button","color","variant","Login","history","useHistory","errorMessage","setErrorMessage","setUsername","setPassword","setUser","preventDefault","userToSet","window","localStorage","setItem","JSON","stringify","push","message","setTimeout","handleUsernameChange","handlePasswordChange","Notification","className","styled","button","Note","toggleImportance","label","TableCell","to","onClick","es","CANCEL_BUTTON","Toggable","forwardRef","ref","children","buttonLabel","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","style","displayName","NoteForm","addNote","handleLogout","newNote","setNewNote","toggableRef","useRef","current","useNotes","setNotes","useEffect","get","then","response","initialNotes","noteObject","newObject","config","headers","Authorization","create","returnedNote","prev","catch","e","error","toggleImportanceOf","n","changedNote","put","update","map","useUser","loggedUserJSON","getItem","parse","userLogin","userLogout","removeItem","Notes","showAll","setShowAll","notesToShow","filter","TableContainer","Table","TableBody","i","TableRow","colors","StyledLink","Link","Home","Users","App","path","render","ReactDOM","document","getElementById"],"mappings":"0JAGaA,EAAa,SAAC,GAAe,IAAbC,EAAY,EAAZA,MACnBC,EAAOC,cAAPD,GACFE,EAAOH,EAAMI,MAAK,SAAAD,GAAI,OAAIA,EAAKF,KAAOA,KAC5C,OAAKE,GAELE,QAAQC,IAAIH,GAGV,gCACE,6BAAKA,EAAKI,UACV,8BAAMJ,EAAKK,KAAKC,OAChB,8BACE,iCACGN,EAAKO,UAAY,YAAc,WAVtB,M,kDCLdC,EAAU,aAEZC,EAAQ,KAECC,EAAW,SAAAC,GACtBF,EAAK,iBAAaE,ICHPC,EAAK,uCAAG,WAAMC,GAAN,iBAAAC,EAAA,sEACIC,IAAMC,KAHf,cAG6BH,GADxB,uBACXI,EADW,EACXA,KADW,kBAEZA,GAFY,2CAAH,sD,yBCEZC,EAAW,SAAC,GAAc,IAAZC,EAAW,EAAXA,KAClB,EAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KAMA,MAAO,CACLH,OACAE,QACAE,SAPe,SAAAC,GACfF,EAASE,EAAMC,OAAOJ,UAUX,SAASK,EAAWC,GACjC,IAAMC,EAAWV,EAAS,CAAEC,KAAM,SAC5BU,EAAWX,EAAS,CAAEC,KAAM,aAClC,OACE,eAACW,EAAA,EAAD,CAAMC,SAAUJ,EAAMK,YAAtB,UACE,cAACF,EAAA,EAAKG,MAAN,CAAYnC,GAAG,WAAf,SACE,cAACgC,EAAA,EAAKI,QAAN,2BACON,GADP,IAEEtB,KAAK,WACL6B,YAAY,gBAGhB,cAACL,EAAA,EAAKG,MAAN,CAAYnC,GAAG,WAAf,SACE,cAACgC,EAAA,EAAKI,QAAN,2BACOL,GADP,IAEEvB,KAAK,WACL6B,YAAY,gBAGhB,cAACC,EAAA,EAAD,CAAQC,MAAM,UAAUC,QAAQ,WAAWxC,GAAG,oBAA9C,sBChCS,SAASyC,IACtB,IAAMC,EAAUC,cAChB,EAAwCrB,mBAAS,MAAjD,mBAAOsB,EAAP,KAAqBC,EAArB,KACA,EAAgCvB,mBAAS,IAAzC,mBAAOQ,EAAP,KAAiBgB,EAAjB,KACA,EAAgCxB,mBAAS,IAAzC,mBAAOS,EAAP,KAAiBgB,EAAjB,KACA,EAAwBzB,mBAAS,MAAjC,mBAAOf,EAAP,KAAayC,EAAb,KAEMd,EAAW,uCAAG,WAAOR,GAAP,eAAAV,EAAA,6DAClBU,EAAMuB,iBADY,kBAIQnC,EAAM,CAC5BgB,WACAC,aANc,OAIVmB,EAJU,OAShBC,OAAOC,aAAaC,QAClB,oBAAqBC,KAAKC,UAAUL,IAGtCtC,EAASsC,EAAUvC,OAEnBqC,EAAQE,GACRJ,EAAY,IACZC,EAAY,IAEZL,EAAQc,KAAK,UAnBG,kDAqBhBpD,QAAQC,IAAI,KAAEG,MACdJ,QAAQC,IAAI,KAAEoD,SACdZ,EAAgB,qBAChBa,YAAW,WACTb,EAAgB,QACf,KA1Ba,0DAAH,sDA8BjB,OAAID,EACK,4BAAIA,IAGTrC,EACK,+CAIP,cAACqB,EAAD,CACEE,SAAUA,EACVC,SAAUA,EACVG,YAAaA,EACbyB,qBAAsB,gBAAGhC,EAAH,EAAGA,OAAH,OAAgBmB,EAAYnB,EAAOJ,QACzDqC,qBAAsB,gBAAGjC,EAAH,EAAGA,OAAH,OAAgBoB,EAAYpB,EAAOJ,UCvD/D,I,EAYesC,EAZM,SAAC,GAAiB,IAAfJ,EAAc,EAAdA,QACtB,OAAgB,OAAZA,EACK,KAIP,qBAAKK,UAAU,QAAf,SACGL,K,gBCPMnB,EAASyB,IAAOC,OAAV,oR,SCoBJC,EAjBF,SAAC,GAAgC,IAA9B/D,EAA6B,EAA7BA,KAAMgE,EAAuB,EAAvBA,iBACdC,EAAQjE,EAAKO,UACf,qBACA,iBAEJ,OACE,qCACE,cAAC2D,EAAA,EAAD,CAAWN,UAAU,OAArB,SACE,cAAC,IAAD,CAAMO,GAAE,iBAAYnE,EAAKF,IAAzB,SAAgCE,EAAKI,YAEvC,cAAC8D,EAAA,EAAD,UACE,cAAC,EAAD,CAAQE,QAASJ,EAAjB,SAAoCC,UChB/BI,EACD,CACRC,cAAe,U,QCGbC,EAAWC,sBAAW,WAAqCC,GAAS,IAA3CC,EAA0C,EAA1CA,SAA0C,IAAhCC,mBAAgC,MAAlB,OAAkB,EACvE,EAA8BvD,oBAAS,GAAvC,mBAAOwD,EAAP,KAAgBC,EAAhB,KAEMC,EAAkB,CAAEC,QAASH,EAAU,OAAS,IAChDI,EAAkB,CAAED,QAASH,EAAU,GAAK,QAE5CK,EAAmB,kBAAMJ,GAAYD,IAQ3C,OANAM,8BAAoBT,GAAK,WACvB,MAAO,CACLQ,uBAKF,gCACE,qBAAKE,MAAOL,EAAZ,SACE,wBAAQV,QAASa,EAAjB,SAAoCN,MAEtC,sBAAKQ,MAAOH,EAAZ,UACGN,EACD,cAAC,IAAD,CAAQN,QAASa,EAAjB,SAAoCZ,EAAYC,yBAMxDC,EAASa,YAAc,WAMRb,QCnCA,SAASc,EAAT,GAA+C,IAA1BC,EAAyB,EAAzBA,QAASC,EAAgB,EAAhBA,aAC3C,EAA8BnE,mBAAS,IAAvC,mBAAOoE,EAAP,KAAgBC,EAAhB,KACMC,EAAcC,mBAmBpB,OACE,eAAC,EAAD,CAAUhB,YAAY,WAAWF,IAAKiB,EAAtC,UACE,mDACA,uBAAM3D,SAhBW,SAACP,GACpBA,EAAMuB,iBAONuC,EALmB,CACjBlF,QAASoF,EACTjF,WAAW,IAIbkF,EAAW,IACXC,EAAYE,QAAQX,oBAMlB,UACE,uBACE9D,KAAK,OACLgB,YAAY,0BACZZ,SAxBa,SAACC,GACpBiE,EAAWjE,EAAMC,OAAOJ,QAwBlBA,MAAOmE,IAET,wBAAQrE,KAAK,SAAb,qBAIF,wBAAQiD,QAASmB,EAAjB,uB,YCnCS,SAASM,IACtB,MAA0BzE,mBAAS,IAAnC,mBAAOvB,EAAP,KAAciG,EAAd,KAEAC,qBAAU,WVGMhF,IAAMiF,IAAIxF,GACXyF,MAAK,SAAAC,GAAQ,OAAIA,EAASjF,QUFpCgF,MAAK,SAAAE,GACJL,EAASK,QAEZ,IAoBH,MAAO,CACLb,QAnBc,SAACc,IVAG,SAACC,GACrB,IAAMC,EAAS,CACbC,QAAS,CACPC,cAAe/F,IAInB,OADgBM,IAAMC,KAAKR,EAAS6F,EAAWC,GAChCL,MAAK,SAAAC,GAAQ,OAAIA,EAASjF,SUNvCwF,CAAOL,GACJH,MAAK,SAAAS,GAAY,OAAIZ,GAAS,SAAAa,GAAI,4BAAQA,GAAR,CAAcD,UAChDE,OAAM,SAACC,GACN3G,QAAQ4G,MAAMD,OAgBlBE,mBAZyB,SAAAjH,GACzB,IAAME,EAAOH,EAAMI,MAAK,SAAA+G,GAAC,OAAIA,EAAElH,KAAOA,KAChCmH,EAAW,2BAAQjH,GAAR,IAAcO,WAAYP,EAAKO,YAEhD,OVFkB,SAACT,EAAIuG,GACzB,IAAMC,EAAS,CACbC,QAAS,CACPC,cAAe/F,IAInB,OADgBM,IAAMmG,IAAN,UAAa1G,EAAb,YAAwBV,GAAMuG,EAAWC,GAC1CL,MAAK,SAAAC,GAAQ,OAAIA,EAASjF,QULhCkG,CAAOrH,EAAImH,GACfhB,MAAK,SAAAS,GACJZ,EAASjG,EAAMuH,KAAI,SAAApH,GAAI,OAAIA,EAAKF,KAAOA,EAAKE,EAAO0G,UAOvD7G,SC9BG,IAAMwH,EAAU,WACrB,MAAwBjG,mBAAS,MAAjC,mBAAOf,EAAP,KAAayC,EAAb,KAEAiD,qBAAU,WACR,IAAMuB,EAAiBrE,OAAOC,aAAaqE,QAAQ,qBACnD,GAAID,EAAgB,CAClB,IAAMjH,EAAO+C,KAAKoE,MAAMF,GACxBxE,EAAQzC,GACRK,EAASL,EAAKI,UAEf,IAEH,IAMMgH,EAAS,uCAAG,iCAAA3G,EAAA,6DAASc,EAAT,EAASA,SAAUC,EAAnB,EAAmBA,SAAnB,SACQjB,EAAM,CAC5BgB,WACAC,aAHc,OACVmB,EADU,OAMhBC,OAAOC,aAAaC,QAClB,oBAAqBC,KAAKC,UAAUL,IAGtCtC,EAASsC,EAAUvC,OACnBqC,EAAQE,GAXQ,2CAAH,sDAcf,MAAO,CACL3C,OACAqH,WAtBiB,WACjB5E,EAAQ,MACRpC,EAASL,EAAKI,OACdwC,OAAOC,aAAayE,WAAW,sBAoB/BF,c,oCCsDWG,I,EAAAA,EApFf,WACE,MAA+C/B,IAAvChG,EAAR,EAAQA,MAAOyF,EAAf,EAAeA,QAASyB,EAAxB,EAAwBA,mBACxB,EAAwCM,IAAhChH,EAAR,EAAQA,KAAMoH,EAAd,EAAcA,UAAWC,EAAzB,EAAyBA,WAEzB,EAA8BtG,oBAAS,GAAvC,mBAAOyG,EAAP,KAAgBC,EAAhB,KACA,EAAwC1G,mBAAS,MAAjD,mBAAOsB,EAAP,KAAqBC,EAArB,KACA,EAAgCvB,mBAAS,IAAzC,mBAAOQ,EAAP,KAAiBgB,EAAjB,KACA,EAAgCxB,mBAAS,IAAzC,mBAAOS,EAAP,KAAiBgB,EAAjB,KAaMb,EAAW,uCAAG,WAAOR,GAAP,SAAAV,EAAA,sDAClBU,EAAMuB,iBACN,IACE0E,EAAU,CAAE7F,WAAUC,aAEtBe,EAAY,IACZC,EAAY,IACZ,MAAOgE,GACP3G,QAAQC,IAAI0G,EAAEvG,MACdJ,QAAQC,IAAI0G,EAAEtD,SACdZ,EAAgB,qBAChBa,YAAW,WACTb,EAAgB,QACf,KAba,2CAAH,sDAiBXoF,EAAcF,EAChBhI,EACAA,EAAMmI,QAAO,SAAAhI,GAAI,OAAIA,EAAKO,aAE9B,OACE,gCACE,uCACA,cAAC,EAAD,CAAcgD,QAASb,IAErBrC,EACI,cAACgF,EAAD,CACEC,QAASA,EACTC,aAAcmC,IAEhB,cAAChG,EAAD,CACEE,SAAUA,EACVC,SAAUA,EACVG,YAAaA,EACbyB,qBAAsB,gBAAGhC,EAAH,EAAGA,OAAH,OAAgBmB,EAAYnB,EAAOJ,QACzDqC,qBAAsB,gBAAGjC,EAAH,EAAGA,OAAH,OAAgBoB,EAAYpB,EAAOJ,UAIjE,8BACE,eAACe,EAAA,EAAD,CAAQC,MAAM,UAAUC,QAAQ,WAAW8B,QAAS,kBAAM0D,GAAYD,IAAtE,kBACQA,EAAU,YAAc,WAGlC,cAACI,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,UACGJ,EAAYX,KAAI,SAACpH,EAAMoI,GAAP,OACf,cAACC,EAAA,EAAD,UACE,cAAC,EAAD,CAEErI,KAAMA,EACNgE,iBAAkB,kBAhEHlE,EAgEgCE,EAAKF,QA/DlEiH,EAAmBjH,GAChB8G,OAAM,SAAAE,GACLnE,EAAgB,wCAChBzC,QAAQ4G,MAAMA,GACdtD,YAAW,WACTb,MACC,QAPsB,IAAA7C,IA8DVsI,IAFMpI,EAAKF,iBC9ErBwI,EACF,OCGEC,EAAa1E,YAAO2E,IAAP3E,CAAH,iLACVyE,GAGM,SAAA3G,GAAK,MAAsB,SAAlBA,EAAMW,QAAqB,OAAS,YAG7BgG,GCF7BG,EAAO,kBAAM,4CAEbC,EAAQ,kBAAM,wCAsDLC,EAlDH,WACV,IAAQtI,EAASgH,IAAThH,KACAR,EAAUgG,IAAVhG,MAER,OACE,eAAC,IAAD,WACE,mCACE,cAAC0I,EAAD,CAAYpE,GAAG,IAAf,kBAGA,cAACoE,EAAD,CAAYpE,GAAG,SAAf,mBAGA,cAACoE,EAAD,CAAYpE,GAAG,SAAf,mBAIE9D,EACI,4CAAeA,EAAKC,QACpB,cAACiI,EAAD,CAAYjG,QAAQ,OAAO6B,GAAG,SAA9B,sBAIR,eAAC,IAAD,WACE,cAAC,IAAD,CAAOyE,KAAK,aAAZ,SACE,cAAC,EAAD,CAAY/I,MAAOA,MAGrB,cAAC,IAAD,CAAO+I,KAAK,SAAZ,SACE,cAAC,EAAD,MAGF,cAAC,IAAD,CAAOA,KAAK,SAAZ,SACE,cAAC,EAAD,MAGF,cAAC,IAAD,CACEA,KAAK,SAASC,OAAQ,WACpB,OAAOxI,EAAO,cAAC,IAAD,CAAU8D,GAAG,MAAS,cAAC5B,EAAD,OAIxC,cAAC,IAAD,CAAOqG,KAAK,IAAZ,SACE,cAAC,EAAD,a,MCrDVE,IAASD,OACP,cAAC,EAAD,IACAE,SAASC,eAAe,W","file":"static/js/main.aa5ea7d6.chunk.js","sourcesContent":["import React from 'react'\nimport { useParams } from 'react-router-dom'\n\nexport const NoteDetail = ({ notes }) => {\n  const { id } = useParams()\n  const note = notes.find(note => note.id === id)\n  if (!note) return null\n\n  console.log(note)\n\n  return (\n    <div>\n      <h2>{note.content}</h2>\n      <div>{note.user.name}</div>\n      <div>\n        <strong>\n          {note.important ? 'important' : ''}\n        </strong>\n      </div>\n    </div>\n  )\n}\n","import axios from 'axios'\nconst baseUrl = '/api/notes'\n\nlet token = null\n\nexport const setToken = newToken => {\n  token = `Bearer ${newToken}`\n}\nexport const getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nexport const create = (newObject) => {\n  const config = {\n    headers: {\n      Authorization: token\n    }\n  }\n  const request = axios.post(baseUrl, newObject, config)\n  return request.then(response => response.data)\n}\n\nexport const update = (id, newObject) => {\n  const config = {\n    headers: {\n      Authorization: token\n    }\n  }\n  const request = axios.put(`${baseUrl}/${id}`, newObject, config)\n  return request.then(response => response.data)\n}\n","import axios from 'axios'\nconst baseUrl = '/api/login/'\n\nexport const login = async credentials => {\n  const { data } = await axios.post(baseUrl, credentials)\n  return data\n}\n","import React, { useState } from 'react'\nimport propTypes from 'prop-types'\nimport Form from 'react-bootstrap/Form'\nimport { Button } from '@material-ui/core'\n\nconst useField = ({ type }) => {\n  const [value, setValue] = useState('')\n\n  const onChange = event => {\n    setValue(event.target.value)\n  }\n\n  return {\n    type,\n    value,\n    onChange\n  }\n}\n\nexport default function LoginForm (props) {\n  const username = useField({ type: 'text' })\n  const password = useField({ type: 'password' })\n  return (\n    <Form onSubmit={props.handleLogin}>\n      <Form.Group id='username'>\n        <Form.Control\n          {... username}\n          name='Username'\n          placeholder='Username'\n        />\n      </Form.Group>\n      <Form.Group id='password'>\n        <Form.Control\n          {... password}\n          name='Password'\n          placeholder='Password'\n        />\n      </Form.Group>\n      <Button color='primary' variant='outlined' id='form-login-button'>\n        Login\n      </Button>\n    </Form>\n  )\n}\n\nLoginForm.propTypes = {\n  handleSubmit: propTypes.func.isRequired,\n  username: propTypes.string\n}\n","import { useState } from 'react'\nimport { setToken } from './services/notes'\nimport { login } from './services/login'\nimport LoginForm from './components/LoginForm'\nimport { useHistory } from 'react-router-dom'\n\nexport default function Login () {\n  const history = useHistory()\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n\n    try {\n      const userToSet = await login({\n        username,\n        password\n      })\n\n      window.localStorage.setItem(\n        'loggedNoteAppUser', JSON.stringify(userToSet)\n      )\n\n      setToken(userToSet.token)\n\n      setUser(userToSet)\n      setUsername('')\n      setPassword('')\n\n      history.push('/notes')\n    } catch (e) {\n      console.log(e.name)\n      console.log(e.message)\n      setErrorMessage('Wrong credentials')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  if (errorMessage) {\n    return <p>{errorMessage}</p>\n  }\n\n  if (user) {\n    return <p>User is logged</p>\n  }\n\n  return (\n    <LoginForm\n      username={username}\n      password={password}\n      handleLogin={handleLogin}\n      handleUsernameChange={({ target }) => setUsername(target.value)}\n      handlePasswordChange={({ target }) => setPassword(target.value)}\n    />\n  )\n}\n","import React from 'react'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className='error'>\n      {message}\n    </div>\n  )\n}\n\nexport default Notification\n","import styled from 'styled-components'\n\nexport const Button = styled.button`\n    background: white;\n    cursor: pointer;\n    font-size: 1 em;\n    margin: 1 em;\n    padding: 4px 12px;\n    border: 1px solid #09f;\n    border-radius: 5px;\n    transition: all .3s ease; \n\n    &:hover {\n        background: #09f;\n    }\n`\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { Button } from './Button'\nimport TableCell from '@material-ui/core/TableCell'\n\nconst Note = ({ note, toggleImportance }) => {\n  const label = note.important\n    ? 'make not important'\n    : 'make important'\n\n  return (\n    <>\n      <TableCell className='note'>\n        <Link to={`/notes/${note.id}`}>{note.content}</Link>\n      </TableCell>\n      <TableCell>\n        <Button onClick={toggleImportance}>{label}</Button>\n      </TableCell>\n    </>\n  )\n}\n\nexport default Note\n","export const es = {\n  TOGGABLE: {\n    CANCEL_BUTTON: 'Cancel'\n  }\n}\n","import React, { forwardRef, useImperativeHandle, useState } from 'react'\nimport propTypes from 'prop-types'\nimport { es } from '../i18n/index'\nimport Button from 'react-bootstrap/Button'\n\nconst Toggable = forwardRef(({ children, buttonLabel = 'show' }, ref) => {\n  const [visible, setVisible] = useState(false)\n\n  const hideWhenVisible = { display: visible ? 'none' : '' }\n  const showWhenVisible = { display: visible ? '' : 'none' }\n\n  const toggleVisibility = () => setVisible(!visible)\n\n  useImperativeHandle(ref, () => {\n    return {\n      toggleVisibility\n    }\n  })\n\n  return (\n    <div>\n      <div style={hideWhenVisible}>\n        <button onClick={toggleVisibility}>{buttonLabel}</button>\n      </div>\n      <div style={showWhenVisible}>\n        {children}\n        <Button onClick={toggleVisibility}>{es.TOGGABLE.CANCEL_BUTTON}</Button>\n      </div>\n    </div>\n  )\n})\n\nToggable.displayName = 'Toggable' // Esto es para que en el warning si faltan proptypes aparezca bien el nombre del componente y no el forwardRef\n\nToggable.propTypes = {\n  buttonLabel: propTypes.string\n}\n\nexport default Toggable\n","import React, { useRef, useState } from 'react'\nimport Toggable from './Toggable'\n\nexport default function NoteForm ({ addNote, handleLogout }) {\n  const [newNote, setNewNote] = useState('')\n  const toggableRef = useRef()\n\n  const handleChange = (event) => {\n    setNewNote(event.target.value)\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n\n    const noteObject = {\n      content: newNote,\n      important: false\n    }\n\n    addNote(noteObject)\n    setNewNote('')\n    toggableRef.current.toggleVisibility()\n  }\n\n  return (\n    <Toggable buttonLabel='New Note' ref={toggableRef}>\n      <h3>Create a new note</h3>\n      <form onSubmit={handleSubmit}>\n        <input\n          type='text'\n          placeholder='Write your note content'\n          onChange={handleChange}\n          value={newNote}\n        />\n        <button type='submit'>\n          Save\n        </button>\n      </form>\n      <button onClick={handleLogout}>\n        Logout\n      </button>\n    </Toggable>\n  )\n}\n","import { useEffect, useState } from 'react'\nimport { getAll, create, update } from '../services/notes'\n\nexport default function useNotes () {\n  const [notes, setNotes] = useState([])\n\n  useEffect(() => {\n    getAll()\n      .then(initialNotes => {\n        setNotes(initialNotes)\n      })\n  }, [])\n\n  const addNote = (noteObject) => {\n    create(noteObject)\n      .then(returnedNote => setNotes(prev => [...prev, returnedNote]))\n      .catch((e) => {\n        console.error(e)\n      })\n  }\n\n  const toggleImportanceOf = id => {\n    const note = notes.find(n => n.id === id)\n    const changedNote = { ...note, important: !note.important }\n\n    return update(id, changedNote)\n      .then(returnedNote => {\n        setNotes(notes.map(note => note.id !== id ? note : returnedNote))\n      })\n  }\n\n  return {\n    addNote,\n    toggleImportanceOf,\n    notes\n  }\n}\n","import { useEffect, useState } from 'react'\nimport { setToken } from '../services/notes'\nimport { login } from '../services/login'\n\nexport const useUser = () => {\n  const [user, setUser] = useState(null)\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedNoteAppUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      setToken(user.token)\n    }\n  }, [])\n\n  const userLogout = () => {\n    setUser(null)\n    setToken(user.token)\n    window.localStorage.removeItem('loggedNoteAppUser')\n  }\n\n  const userLogin = async ({ username, password }) => {\n    const userToSet = await login({\n      username,\n      password\n    })\n\n    window.localStorage.setItem(\n      'loggedNoteAppUser', JSON.stringify(userToSet)\n    )\n\n    setToken(userToSet.token)\n    setUser(userToSet)\n  }\n\n  return {\n    user,\n    userLogout,\n    userLogin\n  }\n}\n","import { useState } from 'react'\nimport Notification from './components/Notification'\nimport Note from './components/Note'\nimport LoginForm from './components/LoginForm'\nimport NoteForm from './components/NoteForm'\nimport useNotes from './hooks/useNotes'\nimport { useUser } from './hooks/useUser'\nimport { TableBody, Table, TableContainer, TableRow, Button } from '@material-ui/core'\n\nfunction Notes () {\n  const { notes, addNote, toggleImportanceOf } = useNotes()\n  const { user, userLogin, userLogout } = useUser()\n\n  const [showAll, setShowAll] = useState(true)\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n\n  const toggleImportanceOfNote = id => {\n    toggleImportanceOf(id)\n      .catch(error => {\n        setErrorMessage('Note was already removed from server')\n        console.error(error)\n        setTimeout(() => {\n          setErrorMessage()\n        }, 5000)\n      })\n  }\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      userLogin({ username, password })\n\n      setUsername('')\n      setPassword('')\n    } catch (e) {\n      console.log(e.name)\n      console.log(e.message)\n      setErrorMessage('Wrong credentials')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  const notesToShow = showAll\n    ? notes\n    : notes.filter(note => note.important)\n\n  return (\n    <div>\n      <h1>Notes</h1>\n      <Notification message={errorMessage} />\n      {\n        user\n          ? <NoteForm\n              addNote={addNote}\n              handleLogout={userLogout}\n            />\n          : <LoginForm\n              username={username}\n              password={password}\n              handleLogin={handleLogin}\n              handleUsernameChange={({ target }) => setUsername(target.value)}\n              handlePasswordChange={({ target }) => setPassword(target.value)}\n            />\n      }\n\n      <div>\n        <Button color='primary' variant='outlined' onClick={() => setShowAll(!showAll)}>\n          show {showAll ? 'important' : 'all'}\n        </Button>\n      </div>\n      <TableContainer>\n        <Table>\n          <TableBody>\n            {notesToShow.map((note, i) =>\n              <TableRow key={note.id}>\n                <Note\n                  key={i}\n                  note={note}\n                  toggleImportance={() => toggleImportanceOfNote(note.id)}\n                />\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </div>\n  )\n}\n\nexport default Notes\n","export const colors = {\n  primary: '#09f'\n}\n","import styled from 'styled-components'\nimport { Link } from 'react-router-dom'\nimport { colors } from '../themes'\n\nexport const StyledLink = styled(Link)`\n    color: ${colors.primary};\n    text-decoration: none;\n    padding: 5px;\n    font-weight: ${props => props.variant === 'bold' ? 'bold' : 'regular'};\n\n    &:hover {\n        border-bottom: 2px solid ${colors.primary};\n    }\n`\n","import { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom'\nimport { NoteDetail } from './components/NoteDetail'\nimport Login from './Login'\nimport Notes from './Notes'\nimport { useUser } from './hooks/useUser'\nimport useNotes from './hooks/useNotes'\n// import { Container, AppBar, IconButton, Toolbar } from '@material-ui/core'\nimport { StyledLink } from './components/StyledLink'\n\nconst Home = () => <h1>Home Page</h1>\n\nconst Users = () => <h1>Users</h1>\n\n// const LinkButton = (props) => <Button color='inherit' component={Link} {...props} />\n\nconst App = () => {\n  const { user } = useUser()\n  const { notes } = useNotes()\n\n  return (\n    <BrowserRouter>\n      <header>\n        <StyledLink to='/'>\n          Home\n        </StyledLink>\n        <StyledLink to='/notes'>\n          Notes\n        </StyledLink>\n        <StyledLink to='/users'>\n          Users\n        </StyledLink>\n        {\n          user\n            ? <em>Logged as {user.name}</em>\n            : <StyledLink variant='bold' to='/login'>Login</StyledLink>\n        }\n      </header>\n\n      <Switch>\n        <Route path='/notes/:id'>\n          <NoteDetail notes={notes} />\n        </Route>\n\n        <Route path='/users'>\n          <Users />\n        </Route>\n\n        <Route path='/notes'>\n          <Notes />\n        </Route>\n\n        <Route\n          path='/login' render={() => {\n            return user ? <Redirect to='/' /> : <Login />\n          }}\n        />\n\n        <Route path='/'>\n          <Home />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}